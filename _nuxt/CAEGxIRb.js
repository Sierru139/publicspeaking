import{_ as Re}from"./Dg81HNA7.js";import{_ as Ue,a as Ve}from"./DZ3XWj07.js";import{A as ee,t as K,r as B,$ as T,B as z,C as L,D as Be,E as Le,d as U,o as Ne,y as W,b as Ke,z as He,u as ze,c as N,e as We}from"./h4vBiQz9.js";import{a5 as te,aE as Xe,X as Ye,a6 as q,e as h,al as O,h as p,af as A,d as f,f as y,ag as _,i as D,t as g,av as ie,aF as Ge,aG as Je,r as X,q as Y,aH as Qe,g as S,aI as Ze,x as R,p as F,am as $e,j as P,ah as G,ai as J,n as Q,aJ as et,aK as j,ax as C,aL as Z,a0 as tt,aM as V,aN as it}from"./CyOQlOYI.js";import{_ as st,s as nt}from"./Cj-0g-CA.js";import{_ as rt}from"./DE2d9Bwb.js";import{u as at}from"./BJjofHG0.js";import{b as ot,a as lt,u as dt}from"./BIYNVGyd.js";const ut={components:{Field:Xe},props:{value:{type:[String,Number],default:null},rows:{type:[String,Number],default:3},id:{type:String,default:void 0},bg:{type:String,default:"bg-gray-150"},prepend:{type:String,default:""},append:{type:String,default:""},label:{type:String,default:""},name:{type:String,default:""},placeholder:{type:String,default:""},rules:{type:String,default:""},immediate:{type:Boolean,default:!1},hideMessage:{type:Boolean,default:!1},autoHideMessage:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},vid:{type:String,default:void 0},height:{type:String,default:void 0},readonly:{type:Boolean,default:!1},labelColor:{type:String,default:"text-gray-800"},labelSize:{type:String,default:"text-[12px]"},textSize:{type:String,default:"text-[14px]"},paddingY:{type:String,default:"py-[8.5px]"},rounded:{type:String,default:"rounded-lg"}},data(){return{tempValue:this.value}},computed:{idFix(){return this.id?this.id:this.name&&this.label?`${this.name}-${this.label}`:""}},watch:{value(i){this.tempValue=i},tempValue(i){this.$emit("input",i)}},methods:{onChange(i){this.$emit("change",i)}}},ct={name:"default"},ht=["for"],mt={key:0,class:"text-red-900",textContent:"*"},pt={class:"flex w-full"},ft={key:0,class:"flex h-full bg-gray-200 px-3"},yt={class:"whitespace-no-wrap text-grey-dark flex items-center leading-normal"},bt=["id","rows","placeholder","name","disabled","readonly"],gt={key:0,class:"flex h-full font-medium"},vt={class:"whitespace-no-wrap text-grey-dark flex items-center bg-black-75 px-3 leading-normal"};function _t(i,s,e,a,t,n){const r=ee,u=Ye("Field");return h(),q(u,{vid:e.vid,name:e.name||e.label||e.placeholder,rules:e.rules,class:_(["w-full",{"mb-[3px]":!e.hideMessage}]),immediate:e.immediate,as:"fieldset"},{default:O(({errors:o})=>[p("div",ct,[A(i.$slots,"label",{},()=>[e.label?(h(),f("label",{key:0,for:n.idFix,class:_(`block font-medium ${e.labelSize} ${e.labelColor} mb-[10px]`)},[D(g(e.label)+" ",1),e.label&&e.rules.split("|").includes("required")?(h(),f("span",mt)):y("",!0)],10,ht)):y("",!0)]),p("div",pt,[A(i.$slots,"prepend-outer"),p("div",{class:_(["relative flex w-full transform flex-wrap items-center overflow-hidden border-2 transition duration-100 ease-in-out focus-within:border-primary",[e.disabled?"bg-black-75 text-black-500":e.bg,{"border-red-600":!!o[0]},e.textSize,e.rounded]])},[A(i.$slots,"prepend",{},()=>[e.prepend?(h(),f("div",ft,[p("span",yt,g(e.prepend),1)])):y("",!0)]),ie(p("textarea",{id:n.idFix,"onUpdate:modelValue":s[0]||(s[0]=l=>t.tempValue=l),rows:e.rows,placeholder:e.placeholder,name:e.name,disabled:e.disabled,readonly:e.readonly,class:_(["relative min-h-10 flex-1 flex-auto flex-shrink flex-grow resize-none px-[12px] leading-normal focus:outline-none",[e.disabled?"bg-gray-50 text-black opacity-100":e.bg,e.height,e.paddingY]]),onChange:s[1]||(s[1]=(...l)=>n.onChange&&n.onChange(...l))},null,42,bt),[[Ge,t.tempValue]]),A(i.$slots,"append",{},()=>[e.append?(h(),f("div",gt,[p("span",vt,g(e.append),1)])):y("",!0)])],2)]),!e.hideMessage&&!e.autoHideMessage||e.autoHideMessage&&o.length>0?(h(),f("span",{key:0,class:_(["break-word mb-[5px] mt-[5px] flex items-center text-red-900",[!o[0]&&"h-[3px]",e.labelSize]])},[o[0]?(h(),q(r,{key:0,icon:"ic-exclamation",class:"mr-[8px] text-[13px] text-red-900"})):y("",!0),D(" "+g(o[0]||"Â "),1)],2)):y("",!0)])]),_:3},8,["vid","name","rules","class","immediate"])}const wt=te(ut,[["render",_t]]),kt=["id","value","disabled","name"],St=["for"],Ct=["for"],xt=["for"],It={__name:"SclvCheckBox",props:{modelValue:{type:Boolean,default:!1},value:{type:Boolean,default:!1},small:{type:Boolean,default:!1},id:{type:String,default:void 0},label:{type:String,default:null},name:{type:String,default:void 0},rules:{type:String,default:""},immediate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},toggle:{type:Boolean,default:!1},labelClass:{type:String,default:""},checkedColor:{type:String,default:"bg-primary-900"},checkedBorderColor:{type:String,default:"border-primary-900"}},emits:["update:modelValue"],setup(i,{emit:s}){const e=i,{value:a,errorMessage:t}=Je(e.name||e.label,e.rules,{initialValue:e.modelValue,validateOnMount:e.immediate});let n=X();const r=X(e.modelValue),u=s;return Y(()=>e.modelValue,o=>{r.value=o,a.value=o}),Y(r,o=>{u("update:modelValue",o)}),(o,l)=>(h(),f("fieldset",{ref_key:"provider",ref:n,class:"flex items-center"},[ie(p("input",{id:i.id||`${i.name}${i.label?`-${i.label}`:""}`,"onUpdate:modelValue":l[0]||(l[0]=c=>Ze(r)?r.value=c:null),value:i.value,disabled:i.disabled,type:"checkbox",name:i.name,class:"hidden"},null,8,kt),[[Qe,S(r)]]),i.toggle?(h(),f("label",{key:0,for:i.id||`${i.name}${i.label?`-${i.label}`:""}`,class:_(["relative cursor-pointer rounded-full",[i.small?"h-[10px] w-[18px] border-[2px]":"h-[16px] w-[28px] border-[3px]",S(r)&&!i.disabled?i.checkedBorderColor:"",{"border-black-750 ":!S(r)&&!i.disabled,"border-gray-350":!S(r)&&i.disabled,"border-blue-50":S(r)&&i.disabled,"border-red-600":!!S(t)}]])},[p("span",{class:_(["absolute block transform rounded-full transition transition-all",[i.small?"top-[-0.75px] h-[8px] w-[8px]":"top-[-2.75px] h-[15.5px] w-[15.5px]",S(r)&&!i.disabled?i.checkedColor:"",!S(r)&&!i.disabled&&"bg-black-750",S(r)&&i.disabled&&"bg-blue-50",!S(r)&&i.disabled&&"bg-gray-350",{"bg-red-600":!!S(t),"translate-x-[9px]":!i.small&&S(r),"translate-x-[-3px]":!i.small&&!S(r),"right-[-1px]":i.small&&S(r),"left-[-1px]":i.small&&!S(r)}]])},null,2)],10,St)):(h(),f("label",{key:1,for:i.id||`${i.name}${i.label?`-${i.label}`:""}`,class:_(["h-[16px] w-[16px] min-w-[16px] cursor-pointer rounded border-2 transition transition-all",{"border-black-200":!i.disabled&&!S(r),"border-primary-900 bg-primary-900":!i.disabled&&S(r),"border-black-300 bg-black-300":i.disabled&&S(r),"border-red-600":!!S(t)}])},null,10,Ct)),A(o.$slots,"default",{},()=>[i.label?(h(),f("label",{key:0,class:_(["ml-3 cursor-pointer",[i.labelClass]]),for:i.id||`${i.name}${i.label?`-${i.label}`:""}`},g(i.label),11,xt)):y("",!0)])],512))}},qt=R({id:"province",state:()=>({loading:!1,province:[]}),actions:{async fetchAllReal({query:i}){var t,n;this.loading=!0;let s="";K(i)||(s=`?${B(i)}`);const a=`${F().public.nexusApiUrl}/location/province/${s}`;try{const r=await T(a);return this.province=r.data,this.loading=!1,r}catch(r){throw((t=r.response)==null?void 0:t.status)===401?new Error("Bad Credentials"):((n=r.response)==null?void 0:n.status)===502?new Error("Network Error"):(this.loading=!1,r)}}}}),Pt=R({id:"city",state:()=>({loading:!1,city:[]}),actions:{async fetchByProvinceReal({provinceId:i,query:s}){var e,a;this.loading=!0;try{let t="";K(s)||(t=`?${B(s)}`);const r=`${F().public.nexusApiUrl}/location/province/${i}/city/${t}`,u=await T(r);return this.city=u.data,this.loading=!1,u}catch(t){throw((e=t.response)==null?void 0:e.status)===401?new Error("Bad Credentials"):((a=t.response)==null?void 0:a.status)===502?new Error("Network Error"):(this.loading=!1,t)}}}}),Mt=R({id:"subdistrict",state:()=>({loading:!1,subdistricts:[]}),actions:{async fetchByCityReal({cityId:i,query:s}){var n,r;this.loading=!0;let e="";K(s)||(e=`?${B(s)}`);const t=`${F().public.nexusApiUrl}/location/city/${i}/subdistrict/${e}`;try{const u=await T(t);return this.subdistricts=u.data,this.loading=!1,u}catch(u){throw((n=u.response)==null?void 0:n.status)===401?new Error("Bad Credentials"):((r=u.response)==null?void 0:r.status)===502?new Error("Network Error"):(this.loading=!1,u)}},async fetchPostalCodes(i){var a,t;this.loading=!0;const e=`${F().public.nexusApiUrl}/location/${i}/postal-code/`;try{const n=await T(e);return this.loading=!1,n.data}catch(n){throw((a=n.response)==null?void 0:a.status)===401?new Error("Bad Credentials"):((t=n.response)==null?void 0:t.status)===502?new Error("Network Error"):(this.loading=!1,n)}}}}),Et=R({id:"order",state:()=>({availableWarehouses:[],availableCouriers:[]}),actions:{async searchAvailableWarehouses(i){var s,e;try{const{order:a,store:t,variants:n,destination:r,cancelToken:u}=i,o=F(),l=await T(`${o.public.nexusApiUrl}/order/search-warehouse/`,{method:"post",body:{order_id:a,store_id:t,variants:n.map(c=>({variant_id:c.id,qty:c.qty})),destination_id:r},signal:u});return this.availableWarehouses=l.data,l}catch(a){throw((s=a.response)==null?void 0:s.status)===401?new Error("Bad Credentials"):((e=a.response)==null?void 0:e.status)===502?new Error("Network Error"):a}},async searchAvailableCouriers(i){var s,e;try{this.availableCouriers=[];const{store:a,paymentMethod:t,destination:n,warehouse:r,weight:u,cancelToken:o}=i,l=F(),c=await T(`${l.public.nexusApiUrl}/order/search-courier-service/`,{method:"post",body:{store_id:a,payment_method:t,location_id:n,warehouse_id:r,weight:u},signal:o});return this.availableCouriers=c.data,c}catch(a){throw((s=a.response)==null?void 0:s.status)===401?new Error("Bad Credentials"):((e=a.response)==null?void 0:e.status)===502?new Error("Network Error"):a}},async storeData(i){var e,a;const s=F();try{const{form:t,page:n,store:r,customerName:u,customerPhone:o,customerEmail:l,name:c,phone:m,address:x,location:b,paymentMethod:v,financialEntityId:k,paymentAccount:E,paymentAccountHolder:I,paymentAccountNumber:w,shippingOrigin:d,shipmentAccount:M,courierService:se,otherIncome:ne,otherIncomeName:re,orderlines:ae,productDiscount:oe,shippingCost:le,shippingDiscount:de,notes:ue,transferProof:ce,ordervariants:he,orderbundles:me,eventSourceUrl:pe,fbc:fe,fbp:ye,ttclid:be,gclid:ge,ttp:ve,clickId:_e,adSource:we,channel:ke,courierAggregator:Se,paymentFee:Ce,paymentFeeRate:xe,minPaymentFee:Ie,subPaymentMethod:qe,utmSource:Pe,utmMedium:Me,utmCampaign:Ee,utmContent:Oe,utmTerm:Fe,discountCodeCode:je,postalCode:Te,recaptchaToken:De}=i,Ae=Object.fromEntries(Object.entries({form:t,page_unique_id:n,store_unique_id:r,customer_name:u,customer_phone:o,customer_email:l,name:c,phone:m,address:x,location_id:b,payment_method:v,financial_entity_id:k,payment_account_unique_id:E,payment_account_holder:I,payment_account_number:w,warehouse_unique_id:d,shipment_account:M,courier_service_id:se,other_income:ne,other_income_name:re,orderlines:ae,product_discount:oe,shipping_cost:le,shipping_discount:de,notes:ue,transferproof_url:ce,ordervariants:he,orderbundles:me,event_source_url:pe,fbc:fe,fbp:ye,ttclid:be,gclid:ge,ttp:ve,kwai_clickid:_e,ad_source:we,channel_unique_id:ke,courier_aggregator_code:Se,payment_fee:Ce,payment_fee_rate:xe,min_payment_fee:Ie,sub_payment_method:qe,utm_source:Pe,utm_medium:Me,utm_campaign:Ee,utm_content:Oe,utm_term:Fe,discount_code_code:je,postal_code:Te,recaptcha_token:De}).filter(([,H])=>H!==null&&H!==""));return await T(`${s.public.nexusApiUrl}/order/public`,{method:"post",body:Ae})}catch(t){throw((e=t.response)==null?void 0:e.status)===401?new Error("Bad Credentials"):((a=t.response)==null?void 0:a.status)===502?new Error("Network Error"):t}}}}),Ot=R({id:"discountCode",state:()=>({}),actions:{async checkCode({code:i,grossRevenue:s,netProductPrice:e,shippingCost:a,pageUniqueId:t,cancelToken:n,paymentMethod:r,domain:u}){var o,l;try{const c=F(),m=B({code:i,gross_revenue:s,net_product_price:e,shipping_cost:a,page_unique_id:t,payment_method:r,domain:u}),x=`${c.public.nexusApiUrl}/check-discount-code?${m}`,b=await T(x,{signal:n});return this.city=b.data,b}catch(c){throw((o=c.response)==null?void 0:o.status)===401?new Error("Bad Credentials"):((l=c.response)==null?void 0:l.status)===502?new Error("Network Error"):c}}}}),$=Ne(),Ft={filters:{mappingCurrency:z,mappingThousand:L},props:{uniqueIdPage:{type:String,default:""},formTitle:{type:String,default:"Lengkapi Data"},isName:{type:Boolean,default:!0},isNameRequired:{type:Boolean,default:!0},nameLabel:{type:String,default:"Nama Lengkap"},namePlaceholder:{type:String,default:"Contoh: Krisdayanti"},phoneLabel:{type:String,default:"No. HP (WhatsApp)"},phonePlaceholder:{type:String,default:"Contoh: 0812000000"},isPhone:{type:Boolean,default:!0},isPhoneRequired:{type:Boolean,default:!0},emailLabel:{type:String,default:"Email"},emailPlaceholder:{type:String,default:"Contoh: krisdayanti@gmail.com"},isEmail:{type:Boolean,default:!1},isEmailRequired:{type:Boolean,default:!1},locationType:{type:String,default:"no_location"},isLocationRequired:{type:Boolean,default:!1},isAddress:{type:Boolean,default:!1},addressLabel:{type:String,default:"Alamat"},addressPlaceholder:{type:String,default:"Contoh: Jl. Perjalanan No. 1"},isAddressRequired:{type:Boolean,default:!1},isCourierSearch:{type:Boolean,default:!1},isCourierShown:{type:Boolean,default:!0},courierLabel:{type:String,default:"Pilih Kurir"},isNotes:{type:Boolean,default:!1},notesLabel:{type:String,default:"Catatan"},notesPlaceholder:{type:String,default:"Contoh: Saya mau yang warna merah, ya."},isNotesRequired:{type:Boolean,default:!1},isDiscountCode:{type:Boolean,default:!1},isCheckoutPage:{type:Boolean,default:!1},discountCodeLabel:{type:String,default:"Discount Code"},discountCodePlaceholder:{type:String,default:"DISCOUNTSCALEV2024"},formPosition:{type:Array,default(){return["name","phone","email","address","payment_method","courier","notes","upsell","summary","discount_code","button"]}},store:{type:[String,Number],default:null},storeObject:{type:Object,default(){return null}},afterSubmitEvent:{type:String,default:"direct_to_whatsapp"},otherPageObject:{type:Object,default(){return null}},customUrl:{type:String,default:""},onsubmitFbEvents:{type:Array,default(){return[]}},onsubmitTiktokEvents:{type:Array,default(){return[]}},onsubmitKwaiClientEvents:{type:Array,default(){return[]}},onsubmitKwaiServerEvents:{type:Array,default(){return[]}},isSummaryShown:{type:Boolean,default:!1},summaryLabel:{type:String,default:"Ringkasan Pesanan"},isUpsell:{type:Boolean,default:!1},upsellType:{type:String,default:"variant"},upsellBundleObject:{type:Object,default(){return null}},upsellVariantObject:{type:Object,default(){return null}},upsellDescription:{type:String,default:""},upsellImg:{type:Array,default(){return[]}},isUpsellImgAutoslide:{type:Boolean,default:!1},upsellImgDuration:{type:Number,default:5},buttonText:{type:String,default:"Kirimkan"},buttonFontSize:{type:String,default:"normal"},buttonColor:{type:String,default:"#ECA913"},textColor:{type:String,default:"#ECA913"},isButtonIcon:{type:Boolean,default:!1},buttonIcon:{type:String,default:"ic-arrow-right-small"},paymentMethodLabel:{type:String,default:"Metode Pembayaran"},isLabelShown:{type:Boolean,default:!0},paymentMethodPosition:{type:Array,default:()=>[...Object.keys(V),...Object.keys(it),...Object.keys(j)]},isUpsellAutoOn:{type:Boolean,default:!1},upsellTogglePosition:{type:String,default:"top"},upsellTextCustom:{type:String,default:""},isPaymentMethod:{type:Boolean,default:!1},inactiveCourierCodes:{type:Array,default:()=>[]},fbPixels:{type:Array,default:()=>[]},tiktokPixels:{type:Array,default:()=>[]},kwaiClientPixels:{type:Array,default:()=>[]},kwaiClientPixelsObjects:{type:Array,default:()=>[]},kwaiServerPixels:{type:Array,default:()=>[]},gtm:{type:Number,default:null},inactivePaymentMethods:{type:Array,default:()=>[]},isPaymentMethodShown:{type:Boolean,default:!0},isPaymentMethodBankTransferExpanded:{type:Boolean,default:!1},isPaymentMethodInitialAsDropdown:{type:Boolean,default:!1},paymentMethodDropdownFbEvents:{type:Array,default:()=>[]},paymentMethodDropdownTiktokEvents:{type:Array,default:()=>[]},paymentMethodDropdownFbEventsParameters:{type:Object,default:()=>{}},paymentMethodDropdownTiktokEventsParameters:{type:Object,default:()=>{}},paymentMethodDropdownKwaiClientEvents:{type:Array,default:()=>[]},paymentMethodDropdownKwaiClientEventsParameters:{type:Object,default:()=>{}},paymentMethodDropdownKwaiServerEvents:{type:Array,default:()=>[]},paymentMethodDropdownKwaiServerEventsParameters:{type:Object,default:()=>{}},fbEventsOnSubmitParameters:{type:Object,default:()=>{}},tiktokEventsOnSubmitParameters:{type:Object,default:()=>{}},kwaiClientEventsOnSubmitParameters:{type:Object,default:()=>{}},kwaiServerEventsOnSubmitParameters:{type:Object,default:()=>{}},customPhone:{type:String,default:""},business:{type:Object,default:()=>null},isUpsellShown:{type:Boolean,default:!0}},setup(){const i=N("_fbc"),s=N("_fbp"),e=N("_ttp"),a=F();return a.public.recaptchaSiteKey&&We({script:[{src:`https://www.google.com/recaptcha/enterprise.js?render=${a.public.recaptchaSiteKey}`,async:!0,defer:!0}]}),{fbc:i,fbp:s,ttp:e,recaptchaSiteKey:a.public.recaptchaSiteKey}},data(){return{province:null,city:null,subdistrict:null,paymentMethod:null,isSearchingCourier:!1,selectedCourier:null,searchWarehouseCancelToken:null,searchCourierCancelToken:null,discountCodeCancelToken:null,isUpsellRequested:!1,itemToPreview:null,isPreviewScreenShown:!1,summaries:[],discount:0,otherIncome:0,otherIncomeName:"",isOtherIncomeShown:!1,upsellObj:null,provinceObject:null,cityObject:null,subdistrictObject:null,name:null,phone:null,email:null,address:null,notes:null,isProvinceLoading:!1,warehouseIndexToTry:0,paymentMethodWithEWalletAndVA:{...V,...j},utmSource:"",utmMedium:"",utmCampaign:"",utmContent:"",utmTerm:"",resNewOrder:null,isSubmiting:!1,cityKey:new Date().getTime()+1,subdistrictKey:new Date().getTime()+2,discountCode:"",isDiscountCodeLoading:!1,isDiscountCodeInvalid:null,typingTimer:null,discountFromDiscountCode:0,discountCodeInvalidMessage:"",isPaymentMethodInitialAsDropdownShown:!this.isPaymentMethodInitialAsDropdown,postalCodeSelected:null,postalCodes:[],recaptchaToken:null,isRecaptchaLoaded:!1,recaptchaRefreshInterval:null}},computed:{...$e(qt,Pt,Mt,Et,ze,at,dt,lt,ot,He,Ot,Ke),financialEntityBank(){var s;const i={};return(s=this.storeObject.payment_accounts)==null||s.forEach(e=>{i[e.financial_entity.code]||(i[e.financial_entity.code]=e.financial_entity.name)}),i},grossRevenue(){return this.summariesCalculated+(this.selectedCourier?this.filteredCouriers.find(i=>i.id===this.selectedCourier).cost:0)-parseInt(this.discount)+parseInt(this.otherIncome)-parseInt(this.discountFromDiscountCode)},isPhysicalProductPresent(){var s,e,a;let i=!1;return this.formStore.isMultipleItemsFromMainFormItems?this.formStore.itemsTypeFromMainFormItems==="variant"?this.formStore.itemsFromMainFormItems.filter(t=>t.isSelected).forEach(t=>{t.itemType==="physical"&&(i=!0)}):this.formStore.itemsFromMainFormItems.filter(t=>t.isSelected).forEach(t=>{t.bundlelines.forEach(n=>{n.variant.item_type==="physical"&&(i=!0)})}):this.formStore.itemsTypeFromMainFormItems==="variant"?((s=this.formStore.itemsFromMainFormItems.find(t=>t.id===this.formStore.selectedItemFromMainFormItems))==null?void 0:s.itemType)==="physical"&&(i=!0):(e=this.formStore.itemsFromMainFormItems.find(t=>t.id===this.formStore.selectedItemFromMainFormItems))==null||e.bundlelines.forEach(t=>{t.variant.item_type==="physical"&&(i=!0)}),this.isUpsell&&this.isUpsellRequested&&(this.upsellType==="variant"&&((a=this.upsellVariantObject)==null?void 0:a.item_type)==="physical"&&(i=!0),this.upsellType==="bundle"&&this.upsellBundleObject&&this.upsellBundleObject.bundle.bundlelines.forEach(t=>{t.variant.item_type==="physical"&&(i=!0)})),i},translatedButtonSize(){let i="";return this.buttonFontSize==="normal"?i="min-h-[44px] text-[16px]":this.buttonFontSize==="smaller"?i="min-h-[36px] text-[14px]":i="min-h-[58px] text-[18px]",i},translatedButtonFontSize(){let i="";return this.buttonFontSize==="normal"?i="text-[14px]":this.buttonFontSize==="smaller"?i="text-[12px]":i="text-[16px]",i},paymentMethods(){var u,o,l,c;const i=((o=(u=this.storeObject)==null?void 0:u.payment_accounts)==null?void 0:o.map(m=>`BT_${m.financial_entity.code}`))||[];let s=W(this.paymentMethodPosition);[...(l=this.storeObject)==null?void 0:l.payment_methods.filter(m=>!["va"].includes(m)),...i,...(c=this.storeObject)==null?void 0:c.xendit_va_bank_codes].forEach(m=>{s.includes(m)||s.push(m)}),this.isPaymentMethodBankTransferExpanded?s=s.filter(m=>m!=="bank_transfer"):s=s.filter(m=>!(m!=null&&m.startsWith("BT_")));const a=[];let t=[],n=[...Object.keys(V).filter(m=>!["bank_transfer","cod","no_payment","pg","marketplace"].includes(m)),...Object.keys(j)];const r=W(n);return this.isPhysicalProductPresent&&(!this.isName||!this.isNameRequired||!this.isCourierSearch||!this.isAddress||!this.isAddressRequired)&&(n=[]),s.forEach(m=>{var x,b,v,k,E;n.includes(m)?[...((x=this.businessStore.enabledEPayments)==null?void 0:x.payment_methods)??[],...((b=this.businessStore.enabledEPayments)==null?void 0:b.vas)??[]].includes(m)&&this.store&&[...(v=this.storeObject)==null?void 0:v.payment_methods,...(k=this.storeObject)==null?void 0:k.xendit_va_bank_codes].includes(m)&&a.push(m):[...(E=this.storeObject)==null?void 0:E.payment_methods.filter(I=>!r.includes(I)),...i].includes(m)&&a.push(m)}),a.forEach(m=>{t.push({value:m,text:this.paymentMethodWithEWalletAndVA[m]==="ALL E-Payment"?"Virtual Account / QRIS / DANA":this.paymentMethodWithEWalletAndVA[m]||this.financialEntityBank[m.replace("BT_","")]||m})}),this.inactivePaymentMethods.forEach(m=>{t=t.filter(x=>x.value!==m)}),t},isSearchCourierReady(){return this.isCourierSearch&&this.subdistrict&&this.paymentMethod&&(this.formStore.selectedItemFromMainFormItems||this.formStore.itemsFromMainFormItems.some(i=>i.isSelected))&&this.isPhysicalProductPresent},filteredCouriers(){const i=[];if(this.orderStore.availableCouriers.length>0){const s=this.orderStore.availableCouriers[0].warehouse.id,e=this.orderStore.availableWarehouses[this.warehouseIndexToTry];this.orderStore.availableCouriers.filter(a=>{var t,n,r,u,o,l,c,m,x,b,v,k;return a.warehouse.id===s&&(!a.courier_aggregator_code||a.courier_aggregator_code==="ninja"||a.courier_aggregator_code==="mengantar"&&(this.business.username===((t=e==null?void 0:e.warehouse)==null?void 0:t.business.username)&&((n=e==null?void 0:e.warehouse)==null?void 0:n.mengantar_origin_id)||this.business.username!==((r=e==null?void 0:e.warehouse)==null?void 0:r.business.username)&&((u=e==null?void 0:e.warehouse_partner)==null?void 0:u.mengantar_origin_id))||a.courier_aggregator_code==="lincah"&&(this.business.username===((o=e==null?void 0:e.warehouse)==null?void 0:o.business.username)&&((l=e==null?void 0:e.warehouse)==null?void 0:l.lincah_origin_id)||this.business.username!==((c=e==null?void 0:e.warehouse)==null?void 0:c.business.username)&&((m=e==null?void 0:e.warehouse_partner)==null?void 0:m.lincah_origin_id))||a.courier_aggregator_code==="kiriminaja"&&(this.business.username===((x=e==null?void 0:e.warehouse)==null?void 0:x.business.username)&&((b=e==null?void 0:e.warehouse)==null?void 0:b.ka_origin_id)||this.business.username!==((v=e==null?void 0:e.warehouse)==null?void 0:v.business.username)&&((k=e==null?void 0:e.warehouse_partner)==null?void 0:k.ka_origin_id)))}).forEach(a=>{var t,n;if(!i.some(r=>r.courier_service.id===a.courier_service.id)&&(a.cost||a.courier_service.courier.code==="pick_up"||a.courier_service.courier.code==="self_courier")&&!this.inactiveCourierCodes.includes(a.courier_service.courier.code)){const r=i.findIndex(u=>u.id===u.courier_service.id);r.length>-1?i[r].cost&&(i.splice(r,1),i.push({id:a.courier_service.id,name:`${a.courier_service.courier.name} - ${a.courier_service.name}`,price:`Rp ${L(((t=a.cost)==null?void 0:t.toString())||"0")}`,logo:`${this.$cdnUrl}/assets/images/kurir/${a.courier_service.courier.code}.png`,...a})):i.push({id:a.courier_service.id,name:`${a.courier_service.courier.name} - ${a.courier_service.name}`,price:`Rp ${L(((n=a.cost)==null?void 0:n.toString())||"0")}`,logo:`${this.$cdnUrl}/assets/images/kurir/${a.courier_service.courier.code}.png`,...a})}})}return i},summariesCalculated(){let i=0;return this.summaries.forEach(s=>{i+=s.price*s.qty}),Math.round(i)}},watch:{discountCode(){this.isDiscountCodeInvalid=null,this.discountFromDiscountCode=0},summariesCalculated(){this.findSummaries()},storeObject(){this.findSummaries()},locationType:{handler(){this.province=null,this.city=null,this.subdistrict=null},immediate:!0},province(i){i&&(this.city=null,this.cityObject=null,this.cityKey=new Date().getTime()+1,this.subdistrict=null,this.subdistrictObject=null,this.subdistrictKey=new Date().getTime()+2,this.cityStore.fetchByProvinceReal({provinceId:i,query:{q:""}}))},city(i){i&&(this.subdistrict=null,this.subdistrictObject=null,this.subdistrictStore.fetchByCityReal({cityId:i,query:{q:""}}))},paymentMethods:{handler(i){this.paymentMethod=i.length>0&&(this.isCourierSearch||this.isPaymentMethod)?i[0].value:null},immediate:!0},isSearchCourierReady(i){i&&this.searchCourier()},"formStore.selectedItemFromMainFormItems":{handler(){this.$nextTick(()=>{this.findSummaries(),this.isSearchCourierReady&&this.searchCourier()})},immediate:!0},isUpsellRequested(){this.findSummaries(),this.isSearchCourierReady&&this.searchCourier()},paymentMethod(){this.isSearchCourierReady?this.searchCourier():this.findSummaries()},async subdistrict(i){var s,e,a;this.isSearchCourierReady&&this.searchCourier(),this.postalCodeSelected=null,(s=this.storeObject)!=null&&s.is_postal_code&&(this.postalCodes=await this.subdistrictStore.fetchPostalCodes(i),((e=this.storeObject)==null?void 0:e.postal_code_requirement)==="autofill"&&(this.postalCodeSelected=(a=this.postalCodes[0])==null?void 0:a.postal_code))},"formStore.itemsFromMainFormItems":{handler(){this.findSummaries(),this.isSearchCourierReady&&this.searchCourier()},deep:!0,immediate:!0},selectedCourier(){this.findSummaries()},isUpsell:{handler(){this.upsellObj=null,this.upsellType==="bundle"&&this.upsellBundleObject?this.upsellObj={id:this.upsellBundleObject.id,uniqueId:this.upsellBundleObject.unique_id,name:this.upsellBundleObject.name,publicName:this.upsellBundleObject.bundle.public_name,price:this.mappingCurrency(this.upsellBundleObject.price.toString()),rawPrice:this.upsellBundleObject.price,bundlelines:this.upsellBundleObject.bundle.bundlelines}:this.upsellVariantObject&&(this.upsellObj={id:this.upsellVariantObject.id,uniqueId:this.upsellVariantObject.unique_id,name:this.upsellVariantObject.name,publicName:this.upsellVariantObject.name,price:this.mappingCurrency(this.upsellVariantObject.price.toString()),rawPrice:this.upsellVariantObject.price,weight:this.upsellVariantObject.weight,itemType:this.upsellVariantObject.item_type})},immediate:!0}},mounted(){var i,s;this.utmSource=(this._.provides[C]||this.$route).query.utm_source||"",this.utmMedium=(this._.provides[C]||this.$route).query.utm_medium||"",this.utmCampaign=(this._.provides[C]||this.$route).query.utm_campaign||"",this.utmTerm=(this._.provides[C]||this.$route).query.utm_term||"",this.utmContent=(this._.provides[C]||this.$route).query.utm_content||"",(this._.provides[C]||this.$route).query.discount_code&&(this.discountCode=(s=(i=(this._.provides[C]||this.$route).query.discount_code)==null?void 0:i.toUpperCase())==null?void 0:s.replaceAll(" ",""),this.$nextTick(()=>{this.checkDiscountCode()})),this.isUpsell&&this.isUpsellAutoOn&&(this.isUpsellRequested=!0),this.validateRecaptchaConfig(),this.recaptchaSiteKey&&this.initializeRecaptcha()},beforeUnmount(){this.stopTokenRefresh()},methods:{mappingCurrency:z,onDiscountCodeChange(i){var s;this.discountCode=(s=i==null?void 0:i.toUpperCase())==null?void 0:s.replaceAll(" ","")},async onPaymentMethodDropdownClick(){if(this.isPaymentMethodInitialAsDropdownShown=!0,!this.isPaymentMethodInitialAsDropdown)return;const i=[];if(this.fbPixels.length>0){const s=[];this.paymentMethodDropdownFbEvents.forEach(()=>{s.push($())}),s.length>0&&(i.push(this.fbStore.eventConversion({pageUniqueId:this.uniqueIdPage,ua:this.commonStore.ua,ip:this.commonStore.ip,referrerUrl:this.commonStore.referer,eventSourceUrl:window.location.href,events:s.map((e,a)=>({event_id:e,event_name:this.paymentMethodDropdownFbEvents[a],parameters:this.paymentMethodDropdownFbEventsParameters[this.paymentMethodDropdownFbEvents[a]]?Object.fromEntries(this.paymentMethodDropdownFbEventsParameters[this.paymentMethodDropdownFbEvents[a]].map(t=>t.key&&t.value?[t.key,t.value]:[])):void 0})),fbc:this.fbc?this.fbc:void 0,fbp:this.fbp?this.fbp:void 0})),this.paymentMethodDropdownFbEvents.forEach((e,a)=>{const t=this.paymentMethodDropdownFbEventsParameters[e]?Object.fromEntries(this.paymentMethodDropdownFbEventsParameters[e].map(n=>n.key&&n.value?[n.key,n.value]:[])):null;window.fbq("track",e,t,{eventID:s[a]})}))}if(this.tiktokPixels.length>0){const s=[];this.paymentMethodDropdownTiktokEvents.forEach(()=>{s.push($())}),s.length>0&&(i.push(this.tiktokStore.eventConversion({pageUniqueId:this.uniqueIdPage,ua:this.commonStore.ua,ip:this.commonStore.ip,referrerUrl:this.commonStore.referer,ttclid:(this._.provides[C]||this.$route).query.ttclid,ttp:this.ttp===void 0?null:this.ttp,eventSourceUrl:window.location.href,events:s.map((e,a)=>({event_id:e,event:this.paymentMethodDropdownTiktokEvents[a],parameters:this.paymentMethodDropdownTiktokEventsParameters[this.paymentMethodDropdownTiktokEvents[a]]?Object.fromEntries(this.paymentMethodDropdownTiktokEventsParameters[this.paymentMethodDropdownTiktokEvents[a]].map(t=>t.key&&t.value?[t.key,t.value]:[])):void 0}))})),this.paymentMethodDropdownTiktokEvents.forEach((e,a)=>{const t=this.paymentMethodDropdownTiktokEventsParameters[e]?Object.fromEntries(this.paymentMethodDropdownTiktokEventsParameters[e].map(n=>n.key&&n.value?[n.key,n.value]:[])):null;window.ttq.track(e,t,{event_id:s[a]})}))}(this.kwaiClientPixels.length>0||this.kwaiServerPixels.length>0)&&(this.paymentMethodDropdownKwaiClientEvents.length>0||this.paymentMethodDropdownKwaiServerEvents.length>0)&&((this._.provides[C]||this.$route).query.click_id&&i.push(this.kwaiStore.eventConversion({pageUniqueId:this.uniqueIdPage,clickId:(this._.provides[C]||this.$route).query.click_id,events:this.paymentMethodDropdownKwaiServerEvents.map((s,e)=>({event_name:s,parameters:this.paymentMethodDropdownKwaiServerEventsParameters[s]?Object.fromEntries(this.paymentMethodDropdownKwaiServerEventsParameters[this.paymentMethodDropdownKwaiServerEvents[e]].map(a=>a.key&&a.value?[a.key,a.value]:[])):void 0}))})),this.kwaiClientPixelsObjects.forEach(s=>{this.paymentMethodDropdownKwaiClientEvents.forEach(e=>{const a=this.paymentMethodDropdownKwaiClientEventsParameters[e]?Object.fromEntries(this.paymentMethodDropdownKwaiClientEventsParameters[e].map(t=>t.key&&t.value?[t.key,t.value]:[])):null;window.kwaiq.instance(s.pixel_id).track(e,a)})})),await Promise.all(i)},async checkDiscountCode(){var i,s;try{this.discountCodeCancelToken&&this.discountCodeCancelToken.abort("Check discount code canceled due to new request"),this.discountCodeCancelToken=new AbortController,this.isDiscountCodeLoading=!0,this.isDiscountCodeInvalid=!1,this.discountCodeInvalidMessage="",this.discountFromDiscountCode=0;const e=this.summariesCalculated-parseInt(this.discount),a=this.selectedCourier?this.filteredCouriers.find(r=>r.id===this.selectedCourier).cost:0;let t=this.paymentMethod;Object.keys(j).includes(this.paymentMethod)&&(t="va");const n=await this.discountCodeStore.checkCode({code:this.discountCode,grossRevenue:isNaN(this.grossRevenue)?0:this.grossRevenue,netProductPrice:isNaN(e)?0:e,shippingCost:a,pageUniqueId:this.uniqueIdPage,paymentMethod:t,cancelToken:this.discountCodeCancelToken.signal,domain:this.uniqueIdPage?null:U().hostname});n.data.is_eligible?this.discountFromDiscountCode=n.data.discount_code_discount:(this.isDiscountCodeInvalid=!0,n.data.eligibility_details.is_enabled?n.data.eligibility_details.is_expiry_check?n.data.eligibility_details.is_limited_to_pages_check?n.data.eligibility_details.is_minimum_revenue_check?n.data.eligibility_details.is_usage_limit_check?n.data.eligibility_details.is_limited_to_payment_methods_check?n.data.eligibility_details.is_amount_not_zero?this.discountCodeInvalidMessage="Discount Code tidak valid.":this.discountCodeInvalidMessage="Silakan lengkapi data terlebih dahulu.":this.discountCodeInvalidMessage="Discount Code tidak berlaku karena metode pembayaran tidak memenuhi syarat.":this.discountCodeInvalidMessage="Discount code tidak berlaku karena jatah penggunaan telah habis.":this.discountCodeInvalidMessage=`Discount code tidak berlaku karena minimum pembelian ${this.mappingCurrency(n.data.discount_code.minimum_revenue)} tidak terpenuhi.`:this.discountCodeInvalidMessage="Discount Code tidak berlaku untuk halaman ini.":this.discountCodeInvalidMessage="Discount Code tidak berlaku karena sudah kadaluarsa.":this.discountCodeInvalidMessage="Discount Code tidak valid.")}catch(e){!e.message.includes("canceled")&&!e.message.includes("abort")&&(this.isDiscountCodeInvalid=!0,this.discountCodeInvalidMessage="Discount Code tidak valid.",this.discountFromDiscountCode=0,((s=(i=e.response)==null?void 0:i._data)==null?void 0:s.code)!==404&&this.$toast.showMessage({message:this.$errorHandlerMessage(e),color:"danger"}))}finally{this.isDiscountCodeLoading=!1}},async execAnalytic(i){const s=[];let e=[];const a=[],t=[];if(this.formStore.itemsTypeFromMainFormItems==="bundle")if(this.formStore.isMultipleItemsFromMainFormItems)this.formStore.itemsFromMainFormItems.filter(n=>n.isSelected).forEach(n=>{a.push({bundle_price_option_id:n.id,bundle_price_option:n.uniqueId,quantity:parseInt(n.qty)||1}),n.bundlelines.forEach(r=>{const u=e.findIndex(o=>o.variant===r.variant.id);u>-1?e[u].quantity+=parseInt(r.quantity)*n.qty:e.push({variant:r.variant.id,quantity:r.quantity*n.qty,price:r.variant.price})})});else{const n=this.formStore.bundlesObjectsFromMainFormItems.find(r=>r.id===this.formStore.selectedItemFromMainFormItems);a.push({bundle_price_option_id:n.id,bundle_price_option:n.unique_id,quantity:1}),n.bundle.bundlelines.forEach(r=>{e.push({variant:r.variant.id,quantity:r.quantity,price:r.variant.price})})}else{if(this.formStore.isMultipleItemsFromMainFormItems)this.formStore.itemsFromMainFormItems.filter(n=>n.isSelected).forEach(n=>{s.push({variant_id:n.id,variant:n.uniqueId,quantity:parseInt(n.qty)||1,price:n.rawPrice})});else{const n=this.formStore.variantsObjectsFromMainFormItems.find(r=>r.id===this.formStore.selectedItemFromMainFormItems);s.push({variant_id:n.id,variant:n.unique_id,quantity:1,price:n.price})}e=s.map(n=>({variant:n.variant_id,quantity:n.quantity,price:n.price}))}if(this.isUpsell&&this.isUpsellRequested&&this.upsellObj)if(this.upsellType==="bundle"){if(a.some(n=>n.bundle_price_option===this.upsellObj.uniqueId)){const n=a.findIndex(r=>r.bundle_price_option===this.upsellObj.uniqueId);a[n].quantity+=1}else a.push({bundle_price_option_id:this.upsellObj.id,bundle_price_option:this.upsellObj.uniqueId,quantity:1});this.upsellObj.bundlelines.forEach(n=>{const r=e.findIndex(u=>u.variant===n.variant.id);r>-1?e[r].quantity+=parseInt(n.quantity):e.push({variant:n.variant.id,quantity:n.quantity,price:n.variant.price})})}else{if(s.some(n=>n.variant===this.upsellObj.uniqueId)){const n=s.findIndex(r=>r.variant===this.upsellObj.uniqueId);s[n].quantity+=1}else s.push({variant_id:this.upsellObj.id,variant:this.upsellObj.uniqueId,quantity:1,price:this.upsellObj.rawPrice});if(e.some(n=>n.variant===this.upsellObj.id)){const n=e.findIndex(r=>r.variant===this.upsellObj.id);e[n].quantity+=1}else e.push({variant:this.upsellObj.id,quantity:1,price:this.upsellObj.rawPrice})}if(this.gtm&&dataLayer&&dataLayer.push({event:"form_submit"}),!i.is_probably_spam&&this.fbPixels.length>0&&this.onsubmitFbEvents.length>0){const n={firstName:this.name?this.name.split(" ").length>1?this.name.substr(0,this.name.lastIndexOf(" ")):this.name.split(" ")[0]:"No",lastName:this.name?(this.name.split(" ").length<2?null:this.name.split(" ")[this.name.split(" ").length-1])||void 0:"Name",email:this.email||void 0,phone:this.phone||void 0,ua:this.commonStore.ua,ip:this.commonStore.ip,referrerUrl:this.commonStore.referer,city:this.subdistrict?this.subdistrictObject.city_name:void 0,state:this.subdistrict?this.subdistrictObject.province_name:void 0,locationId:this.subdistrict?this.subdistrictObject.id:void 0,variants:s.length>0?s.map(r=>({variant_unique_id:r.variant,quantity:r.quantity})):void 0,bundlePriceOptions:a.length>0?a.map(r=>({bundle_price_option_unique_id:r.bundle_price_option,quantity:r.quantity})):void 0,eventSourceUrl:window.location.href,events:this.onsubmitFbEvents.map(r=>({event_id:`${i.order_id}-${r}-FORM`,event_name:r,parameters:this.fbEventsOnSubmitParameters[r]?Object.fromEntries(this.fbEventsOnSubmitParameters[r].map(u=>u.key&&u.value?[u.key,u.value]:[])):void 0})),externalId:`${i.customer_id}`,fbc:this.fbc?this.fbc:void 0,fbp:this.fbp?this.fbp:void 0};this.uniqueIdPage&&(n.pageUniqueId=this.uniqueIdPage),this.isCheckoutPage&&(n.domain=U().hostname),t.push(this.fbStore.eventConversion(n)),this.onsubmitFbEvents.forEach(r=>{var l;let u={};e.length>0&&(u={content_ids:e.map(c=>c.variant),content_category:((l=e.sort((c,m)=>m.price-c.price)[0])==null?void 0:l.category)||"",content_name:e.sort((c,m)=>m.price-c.price)[0].name,content_type:"product",contents:e.map(c=>({id:c.variant,quantity:c.quantity,delivery_category:"home_delivery",item_price:c.price})),value:e.reduce((c,m)=>parseInt(c)+parseInt(m.price)*parseInt(m.quantity),0),currency:"IDR",num_items:e.length});const o=this.fbEventsOnSubmitParameters[r]?Object.fromEntries(this.fbEventsOnSubmitParameters[r].map(c=>c.key&&c.value?[c.key,c.value]:[])):null;window.fbq("track",r,{...u,...o},{eventID:`${i.order_id}-${r}-FORM`})})}if(!i.is_probably_spam&&this.tiktokPixels.length>0&&this.onsubmitTiktokEvents.length>0){const n={email:this.email||void 0,phone:this.phone||void 0,ua:this.commonStore.ua,ip:this.commonStore.ip,referrerUrl:this.commonStore.referer,ttclid:(this._.provides[C]||this.$route).query.ttclid,ttp:this.ttp===void 0?null:this.ttp,variants:s.length>0?s.map(r=>({variant_unique_id:r.variant,quantity:r.quantity})):void 0,bundlePriceOptions:a.length>0?a.map(r=>({bundle_price_option_unique_id:r.bundle_price_option,quantity:r.quantity})):void 0,eventSourceUrl:window.location.href,events:this.onsubmitTiktokEvents.map(r=>({event_id:`${i.order_id}-${r}-FORM`,event:r,parameters:this.tiktokEventsOnSubmitParameters[r]?Object.fromEntries(this.tiktokEventsOnSubmitParameters[r].map(u=>u.key&&u.value?[u.key,u.value]:[])):void 0})),externalId:`${i.customer_id}`};this.uniqueIdPage&&(n.pageUniqueId=this.uniqueIdPage),this.isCheckoutPage&&(n.domain=U().hostname),t.push(this.tiktokStore.eventConversion(n)),this.onsubmitTiktokEvents.forEach(r=>{const u=this.tiktokEventsOnSubmitParameters[r]?Object.fromEntries(this.tiktokEventsOnSubmitParameters[r].map(o=>o.key&&o.value?[o.key,o.value]:[])):null;window.ttq.track(r,u,{event_id:`${i.order_id}-${r}-FORM`})})}if((this.kwaiClientPixels.length>0||this.kwaiServerPixels.length>0)&&(this.onsubmitKwaiClientEvents.length>0||this.onsubmitKwaiServerEvents.length>0)){if(!i.is_probably_spam&&(this._.provides[C]||this.$route).query.click_id){const n={clickId:(this._.provides[C]||this.$route).query.click_id,variants:s.length>0?s.map(r=>({variant_unique_id:r.variant,quantity:r.quantity})):void 0,bundlePriceOptions:a.length>0?a.map(r=>({bundle_price_option_unique_id:r.bundle_price_option,quantity:r.quantity})):void 0,events:this.onsubmitKwaiServerEvents.map((r,u)=>({event_name:r,parameters:this.kwaiServerEventsOnSubmitParameters[r]?Object.fromEntries(this.kwaiServerEventsOnSubmitParameters[this.onsubmitKwaiServerEvents[u]].map(o=>o.key&&o.value?[o.key,o.value]:[])):void 0}))};this.uniqueIdPage&&(n.pageUniqueId=this.uniqueIdPage),this.isCheckoutPage&&(n.domain=U().hostname),t.push(this.kwaiStore.eventConversion(n))}this.kwaiClientPixelsObjects.forEach(n=>{this.onsubmitKwaiClientEvents.forEach(r=>{const u=this.kwaiClientEventsOnSubmitParameters[r]?Object.fromEntries(this.kwaiClientEventsOnSubmitParameters[r].map(o=>o.key&&o.value?[o.key,o.value]:[])):null;window.kwaiq.instance(n.pixel_id).track(r,u)})})}await Promise.all(t)},async fetchProvince(){try{this.locationType==="full_location"&&this.provinceStore.province.length===0&&(this.isProvinceLoading=!0,await this.provinceStore.fetchAllReal({query:{q:""}}))}catch(i){this.$toast.showMessage({message:this.$errorHandlerMessage(i),color:"danger"})}finally{this.isProvinceLoading=!1}},async searchCourier(){var i,s,e,a,t,n,r,u,o,l;try{this.selectedCourier=null,this.isSearchingCourier=!0;const c=[];let m=0;if(this.searchWarehouseCancelToken&&this.searchWarehouseCancelToken.abort("Search Warehouse canceled due to new request"),this.searchCourierCancelToken&&this.searchCourierCancelToken.abort("Search Courier canceled due to new request"),this.searchWarehouseCancelToken=new AbortController,this.searchCourierCancelToken=new AbortController,this.formStore.isMultipleItemsFromMainFormItems)this.formStore.itemsTypeFromMainFormItems==="bundle"?this.formStore.itemsFromMainFormItems.filter(b=>b.isSelected).forEach(b=>{b.bundlelines.forEach(v=>{if(c.some(k=>k.id===v.variant.id)){const k=c.findIndex(E=>E.id===v.variant.id);c[k].qty+=v.quantity*parseInt(b.qty||0)}else c.push({id:v.variant.id,qty:v.quantity*parseInt(b.qty||0)});m+=v.variant.weight*v.quantity*b.qty}),m+=parseInt(b.weight_bump)*b.qty}):this.formStore.itemsFromMainFormItems.filter(b=>b.isSelected).forEach(b=>{c.push({id:b.id,qty:parseInt(b.qty||0)}),m+=b.weight*b.qty});else if(this.formStore.itemsTypeFromMainFormItems==="bundle"){const b=this.formStore.itemsFromMainFormItems.find(v=>v.id===this.formStore.selectedItemFromMainFormItems);b.bundlelines.forEach(v=>{if(c.some(k=>k.id===v.variant.id)){const k=c.findIndex(E=>E.id===v.variant.id);c[k].qty+=v.quantity}else c.push({id:v.variant.id,qty:v.quantity});m+=v.variant.weight*v.quantity}),m+=parseInt(b.weight_bump)}else c.push({id:this.formStore.selectedItemFromMainFormItems,qty:1}),m+=this.formStore.itemsFromMainFormItems.find(b=>b.id===this.formStore.selectedItemFromMainFormItems).weight;if(this.isUpsellRequested)if(this.upsellType==="bundle")(e=(s=(i=this.upsellBundleObject)==null?void 0:i.bundle)==null?void 0:s.bundlelines)==null||e.forEach(b=>{if(c.some(v=>v.id===b.variant.id)){const v=c.findIndex(k=>k.id===b.variant.id);c[v].qty+=b.quantity}else c.push({id:b.variant.id,qty:b.quantity});m+=b.variant.weight}),m+=parseInt(((t=(a=this.upsellBundleObject)==null?void 0:a.bundle)==null?void 0:t.weight_bump)||0);else if(c.some(b=>b.id===this.upsellObj.id)){const b=c.findIndex(v=>v.id===this.upsellObj.id);c[b].qty+=1}else c.push({id:this.upsellObj.id,qty:1}),m+=this.upsellObj.weight;this.warehouseIndexToTry===0&&await this.orderStore.searchAvailableWarehouses({order:null,store:this.store,variants:c,destination:this.subdistrict,cancelToken:this.searchWarehouseCancelToken.signal});let x=this.paymentMethod;Object.keys(j).includes(this.paymentMethod)&&(x="va"),(n=this.paymentMethod)!=null&&n.startsWith("BT_")&&(x="bank_transfer"),await this.orderStore.searchAvailableCouriers({store:this.store,paymentMethod:x,destination:this.subdistrict,warehouse:(u=(r=this.orderStore.availableWarehouses[this.warehouseIndexToTry])==null?void 0:r.warehouse)==null?void 0:u.id,weight:m,cancelToken:this.searchCourierCancelToken.signal}),setTimeout(()=>{var b;if(this.isCourierShown&&this.filteredCouriers.length===0){if(this.warehouseIndexToTry<this.orderStore.availableWarehouses.length-1){this.warehouseIndexToTry+=1,this.searchCourier();return}this.$toast.showMessage({message:"Kurir tidak ditemukan",color:"danger"}),this.warehouseIndexToTry=0}this.isSearchingCourier=!1,this.selectedCourier=(b=this.filteredCouriers[0])==null?void 0:b.id},100)}catch(c){if(console.error(c),this.selectedCourier=null,((o=c==null?void 0:c.data)==null?void 0:o.code)===404&&this.warehouseIndexToTry<this.orderStore.availableWarehouses.length-1){this.warehouseIndexToTry+=1,this.searchCourier();return}!c.message.includes("canceled")&&!c.message.includes("abort")&&!this.$errorHandlerMessage(c).includes("greater than 0")&&(this.$toast.showMessage({message:"Kurir tidak ditemukan",color:"danger"}),this.isSearchingCourier=!1,this.warehouseIndexToTry=0,this.isSearchingCourier=!1),(l=this.$sentry)==null||l.captureException(c)}},findSummaries(){var e,a,t,n,r,u;const i=[];let s=0;if(this.discount=0,this.formStore.selectedItemFromMainFormItems&&this.formStore.itemsFromMainFormItems.length>0)if(this.formStore.isMultipleItemsFromMainFormItems)this.formStore.itemsTypeFromMainFormItems==="bundle"?(this.formStore.itemsFromMainFormItems.filter(o=>o.isSelected).forEach(o=>{o.bundlelines.forEach(l=>{if(i.some(c=>c.id===l.variant.id)){const c=i.findIndex(m=>m.id===l.variant.id);i[c].qty+=l.quantity*parseInt(o.qty||0)}else i.push({id:l.variant.id,name:l.variant.name,price:l.variant.price,bundlePrice:l.price,qty:l.quantity*parseInt(o.qty||0)});s+=l.variant.price*l.quantity*parseInt(o.qty||0)}),s-=o.rawPrice*o.qty}),this.discount=s):this.formStore.itemsFromMainFormItems.filter(o=>o.isSelected).forEach(o=>{i.push({id:o.id,name:o.name,price:o.rawPrice,qty:parseInt(o.qty||0)})});else if(this.formStore.itemsTypeFromMainFormItems==="bundle"){const o=this.formStore.itemsFromMainFormItems.find(l=>l.id===this.formStore.selectedItemFromMainFormItems);o.bundlelines.forEach(l=>{if(i.some(c=>c.id===l.variant.id)){const c=i.findIndex(m=>m.id===l.variant.id);i[c].qty+=l.quantity}else i.push({id:l.variant.id,name:l.variant.name,price:l.variant.price,bundlePrice:l.price,qty:l.quantity});s+=l.variant.price*l.quantity}),s-=o.rawPrice,this.discount=s}else i.push({id:this.formStore.selectedItemFromMainFormItems,name:this.formStore.itemsFromMainFormItems.find(o=>o.id===this.formStore.selectedItemFromMainFormItems).name,price:this.formStore.itemsFromMainFormItems.find(o=>o.id===this.formStore.selectedItemFromMainFormItems).rawPrice,qty:1});if(this.isUpsellRequested&&this.upsellObj)if(this.upsellType==="bundle")(t=(a=(e=this.upsellBundleObject)==null?void 0:e.bundle)==null?void 0:a.bundlelines)==null||t.forEach(o=>{if(i.some(l=>l.id===o.variant.id)){const l=i.findIndex(c=>c.id===o.variant.id);i[l].qty+=o.quantity}else i.push({id:o.variant.id,name:o.variant.name,price:o.variant.price,bundlePrice:o.price,qty:o.quantity});s+=o.variant.price*o.quantity}),s-=this.upsellBundleObject.price,this.discount=s;else if(i.some(o=>o.id===this.upsellObj.id)){const o=i.findIndex(l=>l.id===this.upsellObj.id);i[o].qty+=1}else i.push({id:this.upsellObj.id,name:this.upsellObj.name,price:this.upsellObj.rawPrice,qty:1});if(this.otherIncome=0,this.storeObject){if(this.otherIncomeName=this.storeObject.other_income_name,this.storeObject.auto_other_income==="fixed"&&(this.otherIncome=this.storeObject.fixed_auto_other_income),this.selectedCourier&&this.storeObject.auto_other_income==="payment_fee"&&this.paymentMethod==="cod"){this.otherIncomeName=`Biaya COD (${(u=(r=(n=this.filteredCouriers.find(l=>l.id===this.selectedCourier))==null?void 0:n.courier_service)==null?void 0:r.courier)==null?void 0:u.name})`;const o=this.storeObject.store_courier_other_incomes.find(l=>l.courier_id===this.filteredCouriers.find(c=>c.id===this.selectedCourier).courier_service.courier.id);o?o.type==="percentage"?this.otherIncome=o.percentage/100*(this.grossRevenue+this.discountFromDiscountCode):this.otherIncome=o.amount:this.storeObject.dynamic_other_income_cod_type==="percentage"?this.otherIncome=this.storeObject.dynamic_other_income_cod_default_percentage/100*(this.grossRevenue+this.discountFromDiscountCode):this.otherIncome=this.storeObject.dynamic_other_income_cod_default_amount}else if(this.storeObject.auto_other_income==="payment_fee"&&[...Object.keys(j),"qris","card","invoice","gopay","alfamart","ovo","linkaja","shopeepay","dana"].includes(this.paymentMethod)){this.otherIncomeName=`Biaya Payment (${j[this.paymentMethod]||V[this.paymentMethod]})`;const o=this.storeObject.store_method_other_incomes.find(l=>l.payment_method===this.paymentMethod||l.sub_payment_method===this.paymentMethod);o?o.type==="percentage"?this.otherIncome=o.percentage/100*(this.grossRevenue+this.discountFromDiscountCode):this.otherIncome=o.amount:this.storeObject.dynamic_other_income_epayment_type==="percentage"?this.otherIncome=this.storeObject.dynamic_other_income_epayment_default_percentage/100*(this.grossRevenue+this.discountFromDiscountCode):this.otherIncome=this.storeObject.dynamic_other_income_epayment_default_amount}this.otherIncome=Math.round(this.otherIncome),this.isOtherIncomeShown=this.otherIncome>0}this.summaries=i,clearTimeout(this.typingTimer),this.typingTimer=setTimeout(()=>{this.discountCode&&this.isDiscountCodeInvalid!==null&&this.checkDiscountCode()},300)},onRequestPreview(i){this.itemToPreview=i,this.isPreviewScreenShown=!0},onPhoneFocus(){this.phone||(this.phone="08")},onInvalidSubmit(){this.$refs.scrollTarget.scrollIntoView({behaviour:"smooth"})},async submit(){var s,e,a,t,n,r;let i=this.paymentMethod;try{if(this.isCheckoutPage&&this.formStore.itemsFromMainFormItems.length<=0){this.$toast.showMessage({message:"Belum ada barang pada keranjang",color:"warning"});return}if(this.recaptchaSiteKey&&(await this.generateRecaptchaToken(),!this.recaptchaToken)){this.$toast.showMessage({message:"Verifikasi keamanan gagal. Silakan coba lagi.",color:"danger"});return}if(this.isCourierSearch&&!this.selectedCourier&&this.isPhysicalProductPresent){this.$toast.showMessage({message:"Kurir tidak ditemukan.",color:"danger"});return}const u=this.formStore.itemsTypeFromMainFormItems==="bundle"?this.formStore.isMultipleItemsFromMainFormItems?this.formStore.itemsFromMainFormItems.filter(l=>l.isSelected).map(l=>({bundle_price_option_unique_id:l.uniqueId,quantity:Number(l.qty)||1})):this.formStore.selectedItemFromMainFormItems?[{bundle_price_option_unique_id:this.formStore.itemsFromMainFormItems.find(l=>l.id===this.formStore.selectedItemFromMainFormItems).uniqueId,quantity:1}]:[]:[],o=this.formStore.itemsTypeFromMainFormItems==="variant"?this.formStore.isMultipleItemsFromMainFormItems?this.formStore.itemsFromMainFormItems.filter(l=>l.isSelected).map(l=>({variant_unique_id:l.uniqueId,quantity:Number(l.qty)||1})):this.formStore.selectedItemFromMainFormItems?[{variant_unique_id:this.formStore.itemsFromMainFormItems.find(l=>l.id===this.formStore.selectedItemFromMainFormItems).uniqueId,quantity:1}]:[]:[];if(this.isUpsell&&this.isUpsellRequested&&this.upsellObj)if(this.upsellType==="bundle")if(u.some(l=>l.bundle_price_option_unique_id===this.upsellObj.uniqueId)){const l=u.findIndex(c=>c.bundle_price_option_unique_id===this.upsellObj.uniqueId);u[l].quantity+=1}else u.push({bundle_price_option_unique_id:this.upsellObj.uniqueId,quantity:1});else if(o.some(l=>l.variant_unique_id===this.upsellObj.uniqueId)){const l=o.findIndex(c=>c.variant_unique_id===this.upsellObj.uniqueId);o[l].quantity+=1}else o.push({variant_unique_id:this.upsellObj.uniqueId,quantity:1});this.isSubmiting=!0,this.loadingStore.start(!0),Object.keys(j).includes(this.paymentMethod)&&(i="va"),(s=this.paymentMethod)!=null&&s.startsWith("BT_")&&(i="bank_transfer"),this.resNewOrder=await this.orderStore.storeData({store:this.storeObject.unique_id,page:this.uniqueIdPage,customerName:this.name||"No Name",customerPhone:this.phone,customerEmail:this.email,location:this.subdistrict,address:this.address,notes:this.notes,shippingOrigin:this.isCourierSearch&&this.isPhysicalProductPresent?this.filteredCouriers.find(l=>l.id===this.selectedCourier).warehouse.unique_id:void 0,shipmentAccount:this.isCourierSearch&&this.isPhysicalProductPresent?((e=this.filteredCouriers.find(l=>l.id===this.selectedCourier).shipment_account)==null?void 0:e.id)||null:void 0,courierService:this.isCourierSearch&&this.isPhysicalProductPresent?this.filteredCouriers.find(l=>l.id===this.selectedCourier).courier_service.id:void 0,shippingCost:this.isCourierSearch&&this.isPhysicalProductPresent?this.filteredCouriers.find(l=>l.id===this.selectedCourier).cost:void 0,orderbundles:u,ordervariants:o,fbc:this.fbc?this.fbc:null,fbp:this.fbp?this.fbp:null,ttclid:(this._.provides[C]||this.$route).query.ttclid,gclid:(this._.provides[C]||this.$route).query.gclid,ttp:this.ttp===void 0?null:this.ttp,clickId:(this._.provides[C]||this.$route).query.click_id,eventSourceUrl:window.location.href,adSource:this.adSource,paymentMethod:i,productDiscount:this.discount?parseInt(this.discount):0,otherIncome:this.otherIncome,otherIncomeName:this.otherIncomeName||"",courierAggregator:this.isCourierSearch&&this.isPhysicalProductPresent?((a=this.filteredCouriers.find(l=>l.id===this.selectedCourier))==null?void 0:a.courier_aggregator_code)||null:void 0,subPaymentMethod:i==="va"?this.paymentMethod:void 0,utmSource:this.utmSource,utmMedium:this.utmMedium,utmCampaign:this.utmCampaign,utmTerm:this.utmTerm,utmContent:this.utmContent,discountCodeCode:!this.isDiscountCodeInvalid&&this.discountFromDiscountCode>0?this.discountCode:void 0,postalCode:(t=this.storeObject)!=null&&t.is_postal_code?this.postalCodeSelected:void 0,recaptchaToken:this.recaptchaSiteKey?this.recaptchaToken:void 0}),await this.execAnalytic(this.resNewOrder.data)}catch(u){console.error(u.message),this.resNewOrder||(this.$toast.showMessage({message:this.$errorHandlerMessage(u),color:"danger"}),(n=this.$sentry)==null||n.captureException(u)),this.isSubmiting=!1}finally{if(this.resNewOrder){let u="";if(["card","gopay","invoice","shopeepay","dana","ovo","linkaja"].includes(i))u=`${this.$config.public.baseUrl}/order/public/${this.resNewOrder.data.secret_slug}/success`;else if(this.afterSubmitEvent==="direct_to_whatsapp")u=`${Z}/send/?phone=${this.resNewOrder.data.handler_phone}&text=${this.resNewOrder.data.chat_message}`;else if(this.afterSubmitEvent==="direct_to_custom_whatsapp")u=`${Z}/send/?phone=${this.customPhone}&text=${this.resNewOrder.data.chat_message}`;else if(this.afterSubmitEvent==="other_page"){let o=this.$config.public.baseUrl.replace("http://","").replace("https://","");o.includes("app.")&&(o=o.replace("app.","")),u=`http://${location.host}/${(r=this.otherPageObject)==null?void 0:r.slug}${Object.keys((this._.provides[C]||this.$route).query).length>0?`?${Object.keys((this._.provides[C]||this.$route).query).map(l=>`${l}=${(this._.provides[C]||this.$route).query[l]}`).join("&")}`:""}`}else this.afterSubmitEvent==="custom_url"?u=this.customUrl:this.afterSubmitEvent==="success_page"?u=`${this.$config.public.baseUrl}/order/public/${this.resNewOrder.data.secret_slug}/success`:this.afterSubmitEvent==="order_page"&&(u=`${this.$config.public.baseUrl}/order/public/${this.resNewOrder.data.secret_slug}`);window.self!==window.top?window.parent.postMessage(u,"*"):await tt(u,{external:!0})}this.loadingStore.finish()}},initializeRecaptcha(){if(!this.recaptchaSiteKey){console.warn("reCAPTCHA Enterprise site key not provided");return}let i=0;const s=50,e=()=>{typeof window.grecaptcha<"u"&&window.grecaptcha.enterprise?window.grecaptcha.enterprise.ready(()=>{this.isRecaptchaLoaded=!0,console.log("reCAPTCHA Enterprise initialized successfully"),this.startTokenRefresh()}):i<s?(i++,setTimeout(e,100)):(console.error("reCAPTCHA Enterprise failed to load after maximum retries"),this.isRecaptchaLoaded=!1)};e()},startTokenRefresh(){this.generateRecaptchaToken(),this.recaptchaRefreshInterval=nt(()=>{this.generateRecaptchaToken()},9e4)},stopTokenRefresh(){this.recaptchaRefreshInterval&&(clearInterval(this.recaptchaRefreshInterval),this.recaptchaRefreshInterval=null)},async generateRecaptchaToken(){if(!this.recaptchaSiteKey)return null;if(!this.isRecaptchaLoaded)return console.warn("reCAPTCHA Enterprise not loaded yet"),null;if(typeof window.grecaptcha>"u"||!window.grecaptcha.enterprise)return console.error("reCAPTCHA Enterprise library not available"),null;try{const i=await window.grecaptcha.enterprise.execute(this.recaptchaSiteKey,{action:"order_create"});return i?(this.recaptchaToken=i,console.log("reCAPTCHA token refreshed"),i):(console.error("reCAPTCHA Enterprise token is empty"),null)}catch(i){return console.error("reCAPTCHA Enterprise token generation failed:",i),this.recaptchaToken=null,null}},validateRecaptchaConfig(){return this.recaptchaSiteKey?(this.recaptchaSiteKey==="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"&&console.warn("Using reCAPTCHA test site key. Replace with production key for live environment."),!0):(console.warn("reCAPTCHA Enterprise site key not found in environment variables. Set RECAPTCHA_SITE_KEY."),!1)}}},jt={ref:"scrollTarget"},Tt={key:0,class:"mb-[16px] flex w-full items-center"},Dt={class:"text-[20px] font-[700] leading-[22px] text-black-1100"},At={key:0},Rt={key:1},Ut={key:0},Vt={key:1},Bt={key:0},Lt={key:1},Nt={key:0},Kt={key:1},Ht={class:"flex w-full items-center px-[8px] py-[13px] md:py-[8px]"},zt={class:""},Wt={key:0},Xt={key:1},Yt={class:"text-[16px] !font-[500] text-black-200"},Gt={key:1,class:"flex w-full items-center"},Jt={class:"text-[20px] font-[700] leading-[22px] text-black-1100"},Qt={key:3},Zt={key:0,class:"mb-[16px] flex w-full items-center"},$t={class:"text-[20px] font-[700] leading-[22px] text-black-1100"},ei={key:1,class:"flex items-center"},ti={key:3},ii={key:0,class:"mb-[16px] flex w-full items-center bg-[#f5d764] px-[12px] py-[4px]"},si=["src"],ni=["innerHTML"],ri={key:3,class:"mt-[16px] flex w-full items-center bg-[#f5d764] px-[12px] py-[4px]"},ai=["src"],oi={class:"rounded border-2 border-primary"},li={class:"px-[16px] pt-[16px]"},di={class:"text-[14px] underline"},ui={key:0,class:"space-y-[12px] rounded px-[16px] py-[12px]"},ci={class:"flex w-full"},hi={class:"text-[14px] leading-[19px]"},mi={key:0},pi={class:"ml-auto mt-auto min-w-[90px] text-right text-[14px] leading-[19px]"},fi={class:"flex w-full flex-col gap-y-[12px] px-[16px] pb-[16px]"},yi={key:0,class:"flex w-full"},bi={class:"ml-auto mt-auto min-w-[90px] text-right text-[14px] font-[700] leading-[18px] text-green-500"},gi={key:1,class:"flex w-full"},vi={class:"flex-1 text-[14px] leading-[18px]"},_i={class:"ml-auto mt-auto min-w-[90px] text-right text-[14px] leading-[18px]"},wi={key:2,class:"flex w-full"},ki={class:"text-[14px] leading-[18px]"},Si={class:"ml-auto mt-auto min-w-[90px] text-right text-[14px] leading-[18px]"},Ci={key:3,class:"flex w-full"},xi={class:"text-[14px] font-[700] leading-[18px]"},Ii={class:"ml-auto mt-auto min-w-[90px] text-right text-[14px] font-[700] leading-[18px] text-green-500"},qi={class:"flex w-full border-t-2 border-gray-400 pt-[12px]"},Pi={class:"ml-auto mt-auto min-w-[90px] text-right text-[14px] font-[700] leading-[19px]"},Mi={key:0,class:"flex h-[32px] w-[42px] cursor-pointer items-center rounded bg-green-500 p-[10px]"};function Ei(i,s,e,a,t,n){const r=Re,u=Ue,o=wt,l=ee,c=Ve,m=It,x=st,b=Be,v=Le,k=et,E=rt;return h(),f("div",null,[p("div",jt,null,512),P(k,{onSubmit:n.submit,onInvalidSubmit:n.onInvalidSubmit},{default:O(()=>[e.formTitle?(h(),f("div",Tt,[p("p",Dt,g(e.formTitle),1),s[26]||(s[26]=p("div",{class:"ml-[10px] h-[2px] w-full flex-1 bg-black-150"},null,-1))])):y("",!0),(h(!0),f(G,null,J(e.formPosition,(I,w)=>(h(),f("div",{key:`form-position-2-${w}`},[I==="name"&&e.isName?(h(),q(r,{key:0,id:"name",modelValue:t.name,"onUpdate:modelValue":s[0]||(s[0]=d=>t.name=d),label:e.isLabelShown?e.nameLabel:"",placeholder:e.isLabelShown?e.namePlaceholder:e.nameLabel,rules:e.isNameRequired?"required|min_char:3":"",class:_([{"mt-[16px]":w>0},{"mb-[16px]":w<e.formPosition.length-1}]),"auto-hide-message":"",rounded:"rounded",height:"h-[42px]","error-message-replace":e.isNameRequired&&!t.name?"Kamu pasti punya nama ;)":e.isNameRequired&&t.name.length<3?"Nama minimal 3 karakter":""},null,8,["modelValue","label","placeholder","rules","class","error-message-replace"])):y("",!0),I==="phone"&&(e.isPhone||n.paymentMethods.some(d=>d.value==="ovo"))?(h(),q(r,{key:1,id:"phone",modelValue:t.phone,"onUpdate:modelValue":s[1]||(s[1]=d=>t.phone=d),type:"number",label:e.isLabelShown?e.phoneLabel:"",placeholder:e.isLabelShown?e.phonePlaceholder:e.phoneLabel,rules:e.isPhoneRequired||n.paymentMethods.some(d=>d.value==="ovo")?"required":"",class:_([{"mt-[16px]":w>0},{"mb-[16px]":w<e.formPosition.length-1}]),"auto-hide-message":"",rounded:"rounded",height:"h-[42px]","error-message-replace":"CS akan chat WA kamu, terkait orderan ini. Isi yang teliti ya ;)",onFocus:n.onPhoneFocus},null,8,["modelValue","label","placeholder","rules","class","onFocus"])):y("",!0),I==="email"&&e.isEmail?(h(),q(r,{key:2,id:"email",modelValue:t.email,"onUpdate:modelValue":s[2]||(s[2]=d=>t.email=d),type:"email",label:e.isLabelShown?e.emailLabel:"",placeholder:e.isLabelShown?e.emailPlaceholder:e.emailLabel,rules:e.isEmailRequired?"required|email":"email",class:_([{"mt-[16px]":w>0},{"mb-[16px]":w<e.formPosition.length-1}]),"auto-hide-message":"",rounded:"rounded",height:"min-h-[42px] max-h-[42px]","error-message-replace":"Invoice, status pembayaran, & resi, dikirimnya lewat email ;)"},null,8,["modelValue","label","placeholder","rules","class"])):y("",!0),I==="address"?(h(),f("div",{key:3,class:_([{"mt-[16px]":w>0},{"mb-[16px]":w<e.formPosition.length-1}])},[e.locationType==="full_location"?(h(),q(u,{key:0,modelValue:t.province,"onUpdate:modelValue":s[3]||(s[3]=d=>t.province=d),"selected-object":t.provinceObject,"onUpdate:selectedObject":s[4]||(s[4]=d=>t.provinceObject=d),label:e.isLabelShown?"Provinsi":"",placeholder:e.isLabelShown?"Pilih Provinsi":"Provinsi",options:i.provinceStore.province,"text-field":"province_name","value-field":"ro_province_id",rules:e.isLocationRequired?"required_selection":"","is-searchable":"","no-options-text":t.isProvinceLoading?"Memuat pilihan ...":"Data tidak ditemukan.","auto-hide-message":"",rounded:"rounded",height:"min-h-[42px] max-h-[42px]",onApplyShow:n.fetchProvince},{selection:O(({selectedOption:d,placeholder:M})=>[p("div",{class:_(["flex w-full flex-col pr-[16px]",{"text-black-400":!d}])},[d?(h(),f("span",At,g(`${d==null?void 0:d.province_name}`),1)):(h(),f("span",Rt,g(M),1))],2)]),_:1},8,["modelValue","selected-object","label","placeholder","options","rules","no-options-text","onApplyShow"])):y("",!0),e.locationType==="full_location"?(h(),q(u,{key:t.cityKey,modelValue:t.city,"onUpdate:modelValue":s[5]||(s[5]=d=>t.city=d),"selected-object":t.cityObject,"onUpdate:selectedObject":s[6]||(s[6]=d=>t.cityObject=d),label:e.isLabelShown?"Kota/Kabupaten":"",placeholder:e.isLabelShown?"Pilih Kota/Kabupaten":"Kota/Kabupaten",options:i.cityStore.city,"text-field":"city_name","value-field":"ro_city_id",rules:e.isLocationRequired?"required_selection":"",disabled:!t.province,"auto-hide-message":"",class:"mt-[16px]","is-searchable":"",rounded:"rounded",height:"min-h-[42px] max-h-[42px]"},{selection:O(({selectedOption:d,placeholder:M})=>[p("div",{class:_(["flex w-full flex-col pr-[16px]",{"text-black-400":!d}])},[d?(h(),f("span",Ut,g(`${d==null?void 0:d.city_name}`),1)):(h(),f("span",Vt,g(M),1))],2)]),_:1},8,["modelValue","selected-object","label","placeholder","options","rules","disabled"])):y("",!0),e.locationType==="full_location"?(h(),q(u,{key:t.subdistrictKey,modelValue:t.subdistrict,"onUpdate:modelValue":s[7]||(s[7]=d=>t.subdistrict=d),"selected-object":t.subdistrictObject,"onUpdate:selectedObject":s[8]||(s[8]=d=>t.subdistrictObject=d),label:e.isLabelShown?"Kecamatan":"",placeholder:e.isLabelShown?"Pilih Kecamatan":"Kecamatan",options:i.subdistrictStore.subdistricts,"text-field":"subdistrict_name","value-field":"id",rules:e.isLocationRequired?"required_selection":"",disabled:!t.city,"is-searchable":"","auto-hide-message":"",class:"mt-[16px]",rounded:"rounded",height:"min-h-[42px] max-h-[42px]"},{selection:O(({selectedOption:d,placeholder:M})=>[p("div",{class:_(["flex w-full flex-col pr-[16px]",{"text-black-400":!d}])},[d?(h(),f("span",Bt,g(`${d==null?void 0:d.subdistrict_name}`),1)):(h(),f("span",Lt,g(M),1))],2)]),_:1},8,["modelValue","selected-object","label","placeholder","options","rules","disabled"])):y("",!0),e.locationType==="subdistrict_only"?(h(),q(u,{key:3,modelValue:t.subdistrict,"onUpdate:modelValue":s[9]||(s[9]=d=>t.subdistrict=d),"selected-object":t.subdistrictObject,"onUpdate:selectedObject":s[10]||(s[10]=d=>t.subdistrictObject=d),label:e.isLabelShown?"Kecamatan":"",placeholder:e.isLabelShown?"Pilih Kecamatan":"Kecamatan","url-options":"/location/","base-url":i.$config.public.nexusApiUrl,"search-query":"search","text-field":"subdistrict_name","value-field":"id",rules:e.isLocationRequired?"required_selection":"","is-searchable":"","auto-hide-message":"","empty-options-on-open":"",rounded:"rounded",height:"min-h-[42px] max-h-[42px]"},{selection:O(({selectedOption:d,placeholder:M})=>[p("div",{class:_(["flex w-full flex-col pr-[16px]",{"text-black-400":!d}])},[d?(h(),f("span",Nt,g(`${d.subdistrict_name}, ${d.city_name}, ${d.province_name}`),1)):(h(),f("span",Kt,g(M),1))],2)]),"list-item":O(({item:d})=>[p("div",Ht,[p("span",zt,g(`${d.subdistrict_name}, ${d.city_name}, ${d.province_name}`),1)])]),_:1},8,["modelValue","selected-object","label","placeholder","base-url","rules"])):y("",!0),t.subdistrict&&e.storeObject&&e.storeObject.is_postal_code?(h(),q(u,{key:4,modelValue:t.postalCodeSelected,"onUpdate:modelValue":s[11]||(s[11]=d=>t.postalCodeSelected=d),rules:"required",placeholder:"Pilih Kode Pos",vid:"Pilih Kode Pos",name:"Pilih Kode Pos",options:t.postalCodes,"value-field":"postal_code","text-field":"postal_code","is-searchable":"",class:"mt-[10px]","default-list-height":"","placeholder-search":"Cari Kode Pos","auto-hide-message":"",rounded:"rounded",height:"min-h-[42px] max-h-[42px]"},{selection:O(({placeholder:d})=>[p("div",{class:_(["flex w-full flex-col pr-[16px]",{"text-black-400":!t.postalCodeSelected}])},[t.postalCodeSelected?(h(),f("span",Wt,g(`Kode Pos: ${t.postalCodeSelected}`),1)):(h(),f("span",Xt,g(d),1))],2)]),_:1},8,["modelValue","options"])):y("",!0),e.isAddress?(h(),q(o,{key:5,id:"address",modelValue:t.address,"onUpdate:modelValue":s[12]||(s[12]=d=>t.address=d),label:e.isLabelShown?e.addressLabel:"",placeholder:e.isLabelShown?e.addressPlaceholder:e.addressLabel,rules:e.isAddressRequired?"required":"",rounded:"rounded","auto-hide-message":"","padding-y":"py-[10.5px]",rows:"3",class:"mt-[16px]"},null,8,["modelValue","label","placeholder","rules"])):y("",!0)],2)):y("",!0),I==="payment_method"&&e.isPaymentMethod&&e.isPaymentMethodShown?(h(),f("div",{key:4,class:_([{"mt-[28px]":w>0},{"mb-[24px]":w<e.formPosition.length-1}])},[e.isPaymentMethodInitialAsDropdown&&!t.isPaymentMethodInitialAsDropdownShown?(h(),f("div",{key:0,class:"flex h-[58px] w-full cursor-pointer items-center justify-center gap-x-3 rounded border-2 bg-gray-150 p-3",onClick:s[13]||(s[13]=(...d)=>n.onPaymentMethodDropdownClick&&n.onPaymentMethodDropdownClick(...d))},[p("p",Yt,g(e.paymentMethodLabel.replace(":","")),1),P(l,{icon:"ic-chevron-down",class:"mt-[2px] text-[12px] text-black-200"})])):y("",!0),e.paymentMethodLabel&&t.isPaymentMethodInitialAsDropdownShown?(h(),f("div",Gt,[p("p",Jt,g(e.paymentMethodLabel),1),s[27]||(s[27]=p("div",{class:"ml-[10px] h-[2px] w-full flex-1 bg-black-150"},null,-1))])):y("",!0),n.paymentMethods.length>0&&t.isPaymentMethodInitialAsDropdownShown?(h(),q(c,{key:2,modelValue:t.paymentMethod,"onUpdate:modelValue":s[14]||(s[14]=d=>t.paymentMethod=d),collections:n.paymentMethods,"is-have-initial":"","avatar-class":"",class:"mt-[16px]","img-context":"bank_icon","is-with-avatar":"","avatar-field":"value","wrapper-class":"px-[12px]","min-height":"44px"},null,8,["modelValue","collections"])):y("",!0),n.paymentMethods.length===0&&t.isPaymentMethodInitialAsDropdownShown?(h(),f("div",Qt,s[28]||(s[28]=[p("p",{class:"mt-[10px] text-[14px] font-[400] leading-[19px] text-black-200"}," Metode pembayaran tidak tersedia ",-1)]))):y("",!0)],2)):y("",!0),I==="courier"&&e.isCourierSearch&&n.isSearchCourierReady?(h(),f("div",{key:5,class:_([{"mt-[28px]":w>0},{"mb-[24px]":w<e.formPosition.length-1}])},[e.isCourierShown&&e.courierLabel?(h(),f("div",Zt,[p("p",$t,g(e.courierLabel),1),s[29]||(s[29]=p("div",{class:"ml-[10px] h-[2px] w-full flex-1 bg-black-150"},null,-1))])):y("",!0),t.isSearchingCourier?(h(),f("div",ei,[P(l,{icon:"ic-loading",class:"animate-spin text-[24px] text-primary"}),s[30]||(s[30]=p("p",{class:"ml-[8px] text-[14px] font-[500] leading-[20px] text-black-950"}," Sedang mencari pilihan kurir... ",-1))])):n.filteredCouriers.length>0&&e.isCourierShown?(h(),q(c,{key:2,modelValue:t.selectedCourier,"onUpdate:modelValue":s[15]||(s[15]=d=>t.selectedCourier=d),collections:n.filteredCouriers,"is-have-initial":"","is-with-sub-text":"","is-with-avatar":"","value-field":"id","text-field":"name","img-context":"courier","sub-text-field":"price","avatar-field":"logo",class:"mt-[16px]"},null,8,["modelValue","collections"])):y("",!0),e.isCourierSearch&&(n.paymentMethods.length===0||!t.isSearchingCourier&&n.filteredCouriers.length===0)?(h(),f("div",ti,s[31]||(s[31]=[p("p",{class:"mt-[10px] text-[14px] font-[400] leading-[19px] text-black-200"}," Kurir tidak ditemukan. ",-1)]))):y("",!0)],2)):y("",!0),I==="upsell"&&e.isUpsell&&t.upsellObj&&e.isUpsellShown?(h(),f("div",{key:6,class:_(["border-[3px] border-dashed border-red-600 bg-[#fffbe2] p-[16px]",[{"mt-[28px]":w>0},{"mb-[24px]":w<e.formPosition.length-1}]])},[e.upsellTogglePosition==="top"?(h(),f("div",ii,[p("img",{src:`${i.$cdnUrl}/assets/images/upsell-arrow.gif`,alt:"arrow",class:"mr-[10px] h-[30px] w-[40px]"},null,8,si),P(m,{modelValue:t.isUpsellRequested,"onUpdate:modelValue":s[16]||(s[16]=d=>t.isUpsellRequested=d),toggle:"",name:"Upsell Toggle","checked-color":"bg-green-400","checked-border-color":"border-green-400"},null,8,["modelValue"]),p("p",{class:"ml-[8px] flex-1 cursor-pointer py-[8px] text-[16px] font-[500] text-black",onClick:s[17]||(s[17]=d=>t.isUpsellRequested=!t.isUpsellRequested)},g(e.upsellTextCustom||t.upsellObj.publicName),1)])):y("",!0),e.upsellImg.length>0?(h(),q(x,{key:1,images:e.upsellImg,class:"mb-[16px] w-full",autoslide:e.isUpsellImgAutoslide,"slider-duration":e.upsellImgDuration,onWrapperClick:s[18]||(s[18]=()=>n.onRequestPreview({title:"",images:e.upsellImg}))},null,8,["images","autoslide","slider-duration"])):y("",!0),e.upsellDescription.replace(/<\/?[^>]+(>|$)/g,"")!==""?(h(),f("div",{key:2,class:"html-viewer text-[14px]",innerHTML:e.upsellDescription},null,8,ni)):y("",!0),e.upsellTogglePosition==="bottom"?(h(),f("div",ri,[p("img",{src:`${i.$cdnUrl}/assets/images/upsell-arrow.gif`,alt:"arrow",class:"mr-[10px] h-[30px] w-[40px]"},null,8,ai),P(m,{modelValue:t.isUpsellRequested,"onUpdate:modelValue":s[19]||(s[19]=d=>t.isUpsellRequested=d),toggle:"",name:"Upsell Toggle","checked-color":"bg-green-400","checked-border-color":"border-green-400"},null,8,["modelValue"]),p("p",{class:"ml-[8px] flex-1 cursor-pointer py-[8px] text-[16px] font-[500] text-black",onClick:s[20]||(s[20]=d=>t.isUpsellRequested=!t.isUpsellRequested)},g(e.upsellTextCustom||t.upsellObj.publicName),1)])):y("",!0)],2)):y("",!0),P(b,null,{default:O(()=>[I==="summary"&&e.isSummaryShown?(h(),f("div",{key:0,class:_([{"mt-[28px]":w>0},{"mb-[24px]":w<e.formPosition.length-1}])},[p("div",oi,[p("div",li,[p("p",di,g(e.summaryLabel),1)]),t.summaries.length>0?(h(),f("div",ui,[(h(!0),f(G,null,J(t.summaries,(d,M)=>(h(),f("div",{key:`summary-${M}`,class:"flex w-full items-center"},[p("div",ci,[p("p",hi,[D(g(d.name)+" ",1),d.qty>1?(h(),f("span",mi," ("+g(d.qty)+" x "+g(n.mappingCurrency(d.price))+") ",1)):y("",!0)]),p("p",pi,g(n.mappingCurrency(d.qty*d.price)),1)])]))),128))])):y("",!0),p("div",fi,[t.discount?(h(),f("div",yi,[s[32]||(s[32]=p("p",{class:"text-[14px] font-[700] leading-[18px]"}," Diskon Produk ",-1)),p("p",bi," -"+g(n.mappingCurrency(t.discount)),1)])):y("",!0),e.isCourierSearch&&n.isSearchCourierReady&&t.selectedCourier?(h(),f("div",gi,[p("p",vi," Ongkir ("+g(n.filteredCouriers.find(d=>d.id===t.selectedCourier).name)+") ",1),p("p",_i,g(n.filteredCouriers.find(d=>d.id===t.selectedCourier).price),1)])):y("",!0),t.otherIncome?(h(),f("div",wi,[p("p",ki,g(t.otherIncomeName||""),1),p("p",Si,g(n.mappingCurrency(t.otherIncome)),1)])):y("",!0),t.discountFromDiscountCode>0?(h(),f("div",Ci,[p("p",xi," Diskon ("+g(t.discountCode)+") ",1),p("p",Ii," -"+g(n.mappingCurrency(t.discountFromDiscountCode)),1)])):y("",!0),p("div",qi,[s[33]||(s[33]=p("p",{class:"text-[14px] font-[700] leading-[19px]"},"Total",-1)),p("p",Pi,g(n.mappingCurrency(n.grossRevenue)),1)])])])],2)):y("",!0)]),_:2},1024),I==="notes"&&e.isNotes?(h(),q(o,{key:7,id:"notes",modelValue:t.notes,"onUpdate:modelValue":s[21]||(s[21]=d=>t.notes=d),label:e.isLabelShown?e.notesLabel:"",placeholder:e.isLabelShown?e.notesPlaceholder:e.notesLabel,rules:e.isNotesRequired?"required":"",class:_([{"mt-[16px]":w>0},{"mb-[16px]":w<e.formPosition.length-1}]),rounded:"rounded","auto-hide-message":"","padding-y":"py-[10.5px]",rows:"3"},null,8,["modelValue","label","placeholder","rules","class"])):y("",!0),I==="discount_code"&&e.isDiscountCode?(h(),f("div",{key:8,class:_(["relative flex w-full",[{"mt-[16px]":w>0},{"mb-[16px]":w<e.formPosition.length-1}]])},[P(r,{id:"discountCode","model-value":t.discountCode,label:e.isLabelShown?e.discountCodeLabel:"",placeholder:e.isLabelShown?e.discountCodePlaceholder:e.discountCodeLabel,"auto-hide-message":"",rounded:"rounded",height:"h-[42px]","custom-error":t.discountCode?!t.isDiscountCodeLoading&&t.isDiscountCodeInvalid?t.discountCodeInvalidMessage:"":void 0,"custom-success":t.discountCode?!t.isDiscountCodeLoading&&t.isDiscountCodeInvalid===!1?`Anda berhak atas diskon sebesar ${n.mappingCurrency(t.discountFromDiscountCode)}.`:"":void 0,"is-custom-error-yellow":t.discountCodeInvalidMessage.includes("lengkapi data"),"onUpdate:modelValue":n.onDiscountCodeChange},null,8,["model-value","label","placeholder","custom-error","custom-success","is-custom-error-yellow","onUpdate:modelValue"]),t.discountCode?(h(),f("div",{key:0,class:_(["absolute right-0 p-[10px]",[e.isLabelShown?"top-[25px]":"top-[-3px]"]])},[t.isDiscountCodeLoading?(h(),f("div",Mi,[P(l,{icon:"ic-loading",class:"animate-spin text-[24px] text-white"})])):y("",!0),t.isDiscountCodeInvalid===null&&!t.isDiscountCodeLoading?(h(),f("div",{key:1,class:"flex h-[32px] w-[max-content] cursor-pointer items-center rounded bg-primary p-[10px]",onClick:s[22]||(s[22]=(...d)=>n.checkDiscountCode&&n.checkDiscountCode(...d))},s[34]||(s[34]=[p("p",{class:"text-[14px] font-[500] text-white"},"Apply",-1)]))):y("",!0),t.isDiscountCodeInvalid===!1&&!t.isDiscountCodeLoading?(h(),f("div",{key:2,class:"group flex h-[32px] w-[42px] cursor-pointer items-center rounded bg-green-500 p-[10px]",onClick:s[23]||(s[23]=()=>{t.isDiscountCodeInvalid=null,t.discountCode=""})},[P(l,{icon:"check-sclvico",class:"block text-[24px] text-white group-hover:hidden"}),P(l,{icon:"close-sclvico",class:"hidden text-[24px] text-white group-hover:block"})])):y("",!0),t.isDiscountCodeInvalid===!0&&!t.isDiscountCodeLoading?(h(),f("div",{key:3,class:_(["flex h-[32px] w-[42px] cursor-pointer items-center rounded p-[10px]",[t.discountCodeInvalidMessage.includes("lengkapi data")?"bg-yellow-500":"bg-red-500"]]),onClick:s[24]||(s[24]=()=>{t.isDiscountCodeInvalid=null,t.discountCode=""})},[P(l,{icon:"close-sclvico",class:"text-[24px] text-white"})],2)):y("",!0)],2)):y("",!0)],2)):y("",!0),I==="button"?(h(),f("div",{key:9,class:_([{"mt-[16px]":w>0},{"mb-[16px]":w<e.formPosition.length-1}])},[P(v,{color:"text-white",class:_(["w-full",[n.translatedButtonSize]]),type:"submit",style:Q(`background-color: ${t.isSubmiting?"#F6F9FC":e.buttonColor}`),rounded:"rounded",disabled:t.isSubmiting},{default:O(()=>[p("div",{class:"mx-auto flex items-center",style:Q({color:e.textColor})},[e.isButtonIcon?(h(),q(l,{key:0,icon:e.buttonIcon,class:_(["mr-[12px]",[n.translatedButtonFontSize]])},null,8,["icon","class"])):y("",!0),p("span",null,g(e.buttonText),1)],4)]),_:1},8,["class","style","disabled"])],2)):y("",!0)]))),128))]),_:1},8,["onSubmit","onInvalidSubmit"]),s[35]||(s[35]=p("div",{class:"mt-[12px] block text-[12px] leading-[1.4]"},[p("small",{class:"text-gray-500"},[D(" This site is protected by reCAPTCHA and the Google "),p("a",{href:"https://policies.google.com/privacy",target:"_blank",class:"text-primary"}," Privacy Policy "),D(" and "),p("a",{href:"https://policies.google.com/terms",target:"_blank",class:"text-primary"}," Terms of Service "),D(" apply. ")])],-1)),P(E,{modelValue:t.isPreviewScreenShown,"onUpdate:modelValue":s[25]||(s[25]=I=>t.isPreviewScreenShown=I),images:t.itemToPreview?t.itemToPreview.images:[],title:t.itemToPreview?t.itemToPreview.title:""},null,8,["modelValue","images","title"])])}const Bi=te(Ft,[["render",Ei]]);export{Bi as default};
